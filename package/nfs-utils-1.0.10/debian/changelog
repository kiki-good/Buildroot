nfs-utils (1:1.0.10-2) unstable; urgency=low

  * Remove leftover log file from the .diff.gz.
  * Build package with -O2; it got lost somewhere along the way.
  * Replace - by \- in man pages (exports, nfsstat, showmount) where
    appropriate.
  * Add Required-Stop to the nfs-common and nfs-kernel-server init script
    blocks to match the Required-Start directives.
  * Finally remove DH_VERBOSE=1 from debian/rules.
  * Add a reference to Trond Myklebust's client patch sets in
    README.Debian.nfsv4.
  * Handle issues with the nfs entries missing in /etc/services. (Closes:
    #392276).
    * Depend on netbase (>= 4.24), to make sure we have a version that has the
      entries in the first place.
    * Document that the entries might be missing still in README.Debian.nfsv4
      (in case the user refused to replace a modified version of
      /etc/services), and that they might need re-adding.
    * Make the init script check that the lines are there before starting
      rpc.gssd, and refer to the README otherwise.

 -- Steinar H. Gunderson <sesse@debian.org>  Wed, 11 Oct 2006 15:15:49 +0200

nfs-utils (1:1.0.10-1) unstable; urgency=low

  * New upstream release.
    * Fixes issues with missing write_oid() function. (Closes: #386117)
  * Drop versioned dependency on libnfsidmap1, now that libnfsidmap-dev has
    fixed shlibs. This makes it possible to build against libnfsidmap2.
    (Closes: #386116)
  * Update README.Debian.nfsv4.
    * Remove the part about a patched mount; the NFSv4 patch has been enabled
      in mount for some time.
    * Note that the special export structure might go away in the future.
    * Note that you will need idmapd and possibly gssd/svcgssd enabled.

 -- Steinar H. Gunderson <sesse@debian.org>  Wed,  6 Sep 2006 00:30:32 +0200

nfs-utils (1:1.0.9-12) unstable; urgency=low

  * Really remove dependency on sysvinit.

 -- Steinar H. Gunderson <sesse@debian.org>  Tue,  5 Sep 2006 13:59:29 +0200

nfs-utils (1:1.0.9-11) unstable; urgency=low

  * In the exports man page, document that there might be sensitive non-root
    gids as well as uids, for instance gid staff. (Closes: #385377)
  * Remove unnecessary dependency on sysvinit, in line with the Ubuntu
    packages.
  * Change the versioned build-dependency on librpcsecgss-dev (>= 0.14-2)
    to a build-conflict on 0.14-1, as that is the only version, and it's
    easier for backports and other distributions without the new version of
    librpcsecgss.

 -- Steinar H. Gunderson <sesse@debian.org>  Thu, 31 Aug 2006 01:53:45 +0200

nfs-utils (1:1.0.9-10) unstable; urgency=low

  * The -n option (short option for --no-tcp) to rpc.mountd was set
    to take a parameter, even though --no-tcp doesn't take any, the
    parameter is never used and the help doesn't mention any. Remove
    the colon after 'n' in the getopt string to fix it.
  * Add a versioned dependency from nfs-common to libnfsidmap1 (>= 0.16-3)
    temporarily, to work around #384688.

 -- Steinar H. Gunderson <sesse@debian.org>  Sat, 26 Aug 2006 03:29:09 +0200

nfs-utils (1:1.0.9-9) unstable; urgency=medium

  * Patched svc_socket.c to define __bzero only on ia64.
    Closes: #384552.
 
 -- Anibal Monsalve Salazar <anibal@debian.org>  Fri, 25 Aug 2006 11:45:07 +1000

nfs-utils (1:1.0.9-8) unstable; urgency=medium

  * In the init scripts, don't attempt to use pid files; the daemons don't
    leave them, and --make-pidfile gives wrong pid files since all the daemons
    fork by themselves. Thus, multiple invocations of "start" could leave
    multiple daemons lying around, which could cause all sorts of problems.

 -- Steinar H. Gunderson <sesse@debian.org>  Thu, 17 Aug 2006 17:24:11 +0200

nfs-utils (1:1.0.9-7) unstable; urgency=low

  * New sourceful upload to force rebuild against librpcsecgss3, to get all
    architectures in sync and make sure rpc.gssd actually has a proper library
    to link against.
  * Build-depend against librpcsecgss-dev (>= 0.14-2), since that's when
    the package name bump happened.

 -- Steinar H. Gunderson <sesse@debian.org>  Sat, 12 Aug 2006 19:55:35 +0200

nfs-utils (1:1.0.9-6) unstable; urgency=low

  * Enable idmapd by default if we find an /etc/exports file, as NFSv4 exports
    need idmapd. (See the init script for the complete reasoning). Also start
    nfs-common on initial installation of nfs-kernel-server, as we don't want
    to reboot or restart nfs-common manually just to get idmapd working the
    first time. (Closes: #381366)

 -- Steinar H. Gunderson <sesse@debian.org>  Mon,  7 Aug 2006 21:27:37 +0200

nfs-utils (1:1.0.9-5) unstable; urgency=low

  * Put rpc.svcgssd back into place; removing it was obviously not what
    upstream intended to do after all. (Closes: #378686)
    * Add rpc.svcgssd to nfs-kernel-server.install.
    * Add the svcgssd(8) man page, as well as the rpc.svcgssd(8) symlink.
    * Add NEED_SVCGSSD and RPCSECGSSDOPTS options to nfs-kernel-server.default.
    * Start and rpc.svcgssd in the nfs-kernel-server init script. Currently,
      no autodetection is done; you'll need to enable it manually. (We can't
      start it regardless, since it bombs out if there is no adequate nfs/*
      entry in the keytab.)
  * Remove obsolete RPCGSSDOPTS option from the nfs-kernel-server init script.

 -- Steinar H. Gunderson <sesse@debian.org>  Wed, 19 Jul 2006 14:06:33 +0200

nfs-utils (1:1.0.9-4) unstable; urgency=low

  * Remove versioned dependency on coreutils, as we don't use it indirectly,
    only via ucf (so the dependency should be there). This makes the package
    somewhat easier to backport to sarge.
  * Remove the word "Debian" from our patch against the exports(5) man page,
    as Debian is not the only distribution using these packages.

 -- Steinar H. Gunderson <sesse@debian.org>  Sun, 16 Jul 2006 01:59:13 +0200

nfs-utils (1:1.0.9-3) unstable; urgency=low

  * Don't automatically assume that the kernel is modular if /sbin/modprobe
    is available, check for /proc/modules as well; patch from Nicolas
    Trecourt. (Closes: #377685)

 -- Steinar H. Gunderson <sesse@debian.org>  Thu, 13 Jul 2006 21:39:08 +0200

nfs-utils (1:1.0.9-2) unstable; urgency=low

  * Merge changes from 1.0.9-1 and 1.0.9pre1-4:
    * Disable mount.nfs once again; it's not ready for regular use according
      to upstream.
    * Revert mount options patch to mount.nfs; it's irrelevant as long as we
      don't install the binary.
  * Install the new rpcdebug program.
  * Remove the {mount,umount}.nfs manpages.

 -- Steinar H. Gunderson <sesse@debian.org>  Sun,  9 Jul 2006 00:16:54 +0200

nfs-utils (1:1.0.9-1) unstable; urgency=high

  * Updated co-mantainer mail address.
  * New upstream release.
    - Added 'mount.nfs' utility which can be used as a mount helper
      to mount nfs filesystems. It does not yet support 'user' mounts.
    - Makefile/autoconf tidyups
    - No compiles with no warnings
    - deleted debian/* at request of debian maintainer
    - deleted assorted other unused files
    - mountd can be run multi-threaded for configurations with many hundreds
      of clients (mountd -t 20).  Default is single-threaded
    - Support for selection NFS version to be exported, and protocol to
      use.  This requires kernel patches that should be in linux 2.6.19.
    - Use 65534 rather than -2 for default anon.  This makes no difference in many
      cases, but is important in some.
    - New utility 'rpcdebug' for controlled kernel 'debug' options for nfs and nfsd.
    - nfsstat reports NFSv4 operation statistics that should be available in
      linux 2.6.18.
    - assorted other fixes

 -- Anibal Monsalve Salazar <anibal@debian.org>  Sat, 08 Jul 2006 14:26:40 +1000

nfs-utils (1:1.0.8+1.0.9pre1-4) unstable; urgency=low

  * Back out having separate mount.nfs; this is in line with upstream, who
    wants to delay this to 1.0.10. 
    * No longer install {mount,umount}.{nfs,nfs4} to /sbin.
    * Revert patch applied in -3.

 -- Steinar H. Gunderson <sesse@debian.org>  Sat,  8 Jul 2006 16:43:38 +0200

nfs-utils (1:1.0.8+1.0.9pre1-3) unstable; urgency=high

  * Add patch from upstream to check for common mount options like "user"
    or "noauto". (Closes: #376839)
  * Remove obsolete copying of config.{sub,guess} in debian/rules.

 -- Steinar H. Gunderson <sesse@debian.org>  Fri,  7 Jul 2006 21:12:06 +0200

nfs-utils (1:1.0.8+1.0.9pre1-2) unstable; urgency=low

  * Provide LSB dependency information in the nfs-common and nfs-kernel-server
    init scripts; replaces the obsolete chkconfig info. (Closes: #376976)
  * Update the long descriptions.

 -- Steinar H. Gunderson <sesse@debian.org>  Thu,  6 Jul 2006 19:37:58 +0200

nfs-utils (1:1.0.8+1.0.9pre1-1) unstable; urgency=low

  * New upstream release.
    * debian/ directory removed from upstream; no need to repack or do ugly
      hacks in debian/rules anymore.
    * Obsoletes most Debian-specific patches, as they are already included
      upstream. For reference, the patches that are still Debian-specific are:
      * Use 65534 instead of -2 for anonuid, update manpage accordingly.
      * Debian-specific information in exports man page.
      * Don't use -rpath for gssd.
      * Hardcode default mapping in svcgssd. Adjust patch to use uid/gid 
        65534 instead of -2, for consistency; also remove double error
        message. 
      * Spelling fixes in nfsstat, showmount and statd man pages.
    * Supports options to bind to specific IPs. (Closes: #246939, #312720)
    * Include mount.nfs and friends, which will over time take over the job of
      doing NFS mounting from util-linux.
  * Complete sync with Ubuntu:
    * Pull in changes to use LSB display functions in init scripts; adapted
      to give output more like what was already in Debian, to fix a few bugs,
      and use plain echo in "status" targets, where using LSB functions makes
      no sense.
    * Depend on lsb-base from nfs-common and nfs-kernel-server.
  * Init script updates:
    * Document "status" option in the nfs-common init script's help message.
    * Drop "set -e"; it makes error checking wrt. the LSB functions harder.
    * Drop obsolete "cd /".
    * Fix syntax errors in "status" target.
    * In the "status" target, don't check that the output of pidof matches the
      pidfiles for gssd and idmapd, as they fork after start and thus get a
      different pid.
  * Include gss_clnt_send_err and gss_destroy_creds binaries.

 -- Steinar H. Gunderson <sesse@debian.org>  Tue,  4 Jul 2006 18:55:51 +0200

nfs-utils (1:1.0.8-10) unstable; urgency=high

  * Added nfs-common dependency on coreutils (>= 5.93-1). The readlink
    option -e was introduced since version 5.91 of coreutils. Closes:
    #376285.

 -- Anibal Monsalve Salazar <anibal@debian.org>  Sun, 02 Jul 2006 09:53:16 +1000

nfs-utils (1:1.0.8-9) unstable; urgency=high

  * svcgssd_proc.c: Temporary patch to do default mapping if we get an
    error while trying to map a gss principal to the appropriate uid/gid.
    This currently returns hardcoded values. Closes: #376258.

 -- Anibal Monsalve Salazar <anibal@debian.org>  Sat, 01 Jul 2006 22:30:11 +1000

nfs-utils (1:1.0.8-8) unstable; urgency=low

  * Include yet more ucf md5sums for /etc/default/nfs-common and
    /etc/default/nfs-kernel-server (/etc/exports was already OK); this time,
    I've gone through the entire 1.0.7 series programmatically, so hopefully
    there should finally be none left.

 -- Steinar H. Gunderson <sesse@debian.org>  Wed, 14 Jun 2006 10:47:23 +0200

nfs-utils (1:1.0.8-7) unstable; urgency=low

  * For some odd reason (ie. human error) this package has branched into two
    different versions from 1:1.0.8-5 on. This package rejoins the two branches.
    The changelog from the other 1:1.0.8-5 (which was probably never accepted
    except as part of 1:1.0.8-6) is repeated for convenience and automated bug
    closing below:
  * Patch nfs-common and nfs-kernel-server init scripts to make them more LSB
    compatible, fixing issues with heartbeat2; based on patches by Kilian
    CAVALOTTI. (Closes: #371084, #371085)
    * Add --oknodo to start-stop-daemon in start targets, to make a second
      "start" invocation return exit status 0.
    * Add status targets to the two init scripts, with correct output and
      exit codes.

 -- Steinar H. Gunderson <sesse@debian.org>  Thu, 08 Jun 2006 17:31:28 +0200

nfs-utils (1:1.0.8-5) unstable; urgency=low

  * Make nfs-kernel-server depend on at least version 1.0.8 of nfs-common;
    lots of stuff will break with an upstream version mismatch.

 -- Steinar H. Gunderson <sesse@debian.org>  Wed,  7 Jun 2006 01:13:28 +0200

nfs-utils (1:1.0.8-4) unstable; urgency=low

  * Fix a few spelling errors in the man pages; patches from A Costa.
    (Closes: #370561, #370562, #370563)

 -- Steinar H. Gunderson <sesse@debian.org>  Tue,  6 Jun 2006 11:59:28 +0200

nfs-utils (1:1.0.8-3) unstable; urgency=low

  * The "what the heck, I uploaded an outdated 1:1.0.8-1 release without
    the pkg-config fix and some other changes" release.
  * Tweaks to debian/rules:
    * Drop --sourcedir=debian/tmp from dh_install so we can also install files
      directly from the debian/ directory.
    * Minimize direct uses of install; move all the ucf installation into the
      debhelper .install files.
    * Remove some obsolete comments.
  * Remove empty (modulo #DEBHELPER# tokens) nhfsstone.{postinst,prerm}
    scripts.
  * Clear out obsolete (pre-sarge) debconf and rc.d purging from postinst
    script. (Same as in 1:1.0.7-10, but for nfs-kernel-server too, not just
    nfs-common.) Minor style cleanup.
  * Include the md5sum for /etc/default/nfs-kernel-server from 1:1.0.7-13, 
    to make ucf not complain when upgrading from that version.

 -- Steinar H. Gunderson <sesse@debian.org>  Sat,  3 Jun 2006 11:00:14 +0200

nfs-utils (1:1.0.8-2) unstable; urgency=low

  * Added missing dependency on pkg-config.

 -- Anibal Monsalve Salazar <anibal@debian.org>  Fri, 02 Jun 2006 19:08:11 +1000

nfs-utils (1:1.0.8-1) unstable; urgency=low

  * New upstream version. (Closes: #364902)
    * Repack without the debian/ directory; remove ugly hacks in
      debian/rules that as a result are no longer needed. This also makes
      the permissions in debian/ right.
    * Forward-port all relevant patches from the old Debian diff.
    * rpc.svcgssd no longer exists (it's consolidated into rpc.gssd); remove
      all references to it in from the debian/ directory.
    * Build-depend on libgssapi-dev and librpcsecgss-dev, as both as now
      needed to build nfs-utils.
    * Give DESTDIR instead of install_prefix to "make install" (install_prefix
      no longer works).
  * No longer handle gssapi_mech.conf via ucf; it is now managed by the
    librpcsecgss package. Remove all references to it in debian/rules.
  * We no longer need to run autoconf as a part of debian/rules; its results
    are parts of the diff instead, as per usual packaging practices.
    * Drop the build-dependency on autoconf2.13 and autotools-dev.
    * No longer rm various autotools-generated files in the clean target.

 -- Steinar H. Gunderson <sesse@debian.org>  Thu,  1 Jun 2006 01:59:39 +0200

nfs-utils (1:1.0.7-19) unstable; urgency=low

  * Include the md5sum for /etc/default/nfs-common from 1:1.0.7-15, to
    make ucf not complain when upgrading from that version. (Closes: #368982)

 -- Steinar H. Gunderson <sesse@debian.org>  Sat, 27 May 2006 12:54:50 +0200

nfs-utils (1:1.0.7-18) unstable; urgency=low

  * Make /etc/exports, /etc/default/nfs-{common,kernel-server},
    /etc/idmapd.conf and /etc/gssapi_mech.conf be managed by ucf
    instead of being conffiles. (Closes: #353501)
    * Make directories /usr/share/nfs-{common,kernel-server}/conffiles,
      and install files in there at debian/rules time. At the same time,
      install the files with install instead of cp.
    * Call ucf at postinst time to get the files in.
    * Correspondingly, call ucf at purge time to remove them as needed (code
      snippets lifted from autofs).
    * Make nfs-common and nfs-kernel-server depend on ucf.
    * Remove the call to dh_installinit -- since it was already not modifying
      postinst/postrm/prerm scripts due to being called with -n (I must admit
      I don't know why, but I assume this has a good reason :-) ) and we now
      install the init script ourself (because we don't want dh_installinit
      to install our .default files to /etc), it doesn't do anything useful
      for us.
    * Include .md5sum files with MD5 checksums of previous defaults shipped,
      to ease the transition into ucf; at the moment, only checksums from
      1:1.0.7-17 (the last non-ucf version) and 1:1.0.6-3.1 (the version
      shipped in sarge) are included, but I think that should actually cover
      all the defaults shipped in the period between as well.
    * Install the .md5sum files in debian/rules.
  * Remove call to dh_installexamples in debian/rules; we don't install any
    examples.

 -- Steinar H. Gunderson <sesse@debian.org>  Mon, 22 May 2006 01:44:33 +0200

nfs-utils (1:1.0.7-17) unstable; urgency=low

  * The umounting of rpc_pipefs is non-critical and will fail if there are
    any active NFS mounts during, say, a restart. Thus, send its stderr to
    /dev/null, and ignore its error status.
  * Build-Depend on perl, as it's used in debian/rules.

 -- Steinar H. Gunderson <sesse@debian.org>  Sun, 14 May 2006 18:22:19 +0200

nfs-utils (1:1.0.7-16) unstable; urgency=high

  * urgency=high; fixes an RC bug.
  * If one upgraded from 1:1.0.7-13, /var/lib/nfs might never be set as owned
    by statd. Bump the version check, so everything before this version gets
    chowned properly. (Closes: #367009)
  * Add more detailed explanations and links to the Debian wiki for
    /etc/defaults/nfs-{common,kernel-server}. (Closes: #366989, #366990)

 -- Steinar H. Gunderson <sesse@debian.org>  Sat, 13 May 2006 16:06:08 +0200

nfs-utils (1:1.0.7-15) unstable; urgency=low

  * /var/lib/nfs/state is not a directory; it shouldn't really be mkdir-ed
    or chowned (unless it already exists, in which case it should be
    chowned). However, /var/lib/nfs should be owned by statd, so it can
    create the file there. (Really Closes: #366654)
  * umount /var/lib/nfs/rpc_pipefs on /etc/init.d/nfs-common stop; not doing
    so could prevent purging of nfs-common.

 -- Steinar H. Gunderson <sesse@debian.org>  Thu, 11 May 2006 12:42:13 +0200

nfs-utils (1:1.0.7-14) unstable; urgency=high

  * urgency=high; fixes RC bugs (or at least, bugs that should have been RC).
  * Add /var/lib/nfs/state to nfs-common.dirs, since we chown it in the
    postinst. This would prevent nfs-common from configuring on initial
    install. (Closes: #366654)
  * Grep after "init_nf(sd|<tab>)" instead of "init_nfsd" in kallsyms, to work
    around some odd symbol mangling problems on some alpha kernels.
    (Closes: #363932)

 -- Steinar H. Gunderson <sesse@debian.org>  Wed, 10 May 2006 22:00:59 +0200

nfs-utils (1:1.0.7-13) unstable; urgency=low

  * Up the Standards-Version to 3.7.2; no changes needed.
  * Tidy up after the /home/statd mess if there was a chance the user ever
    had 1:1.0.7-10 installed; based on patch from Oskar Liljeblad.
    (Closes: #366182)
  * Fix the version check for the chown-ing of /var/lib/nfs/sm etc.; I
    forgot to include the epoch, so only new installs ever got statd running
    as non-root. (Due to this, the version number to test against is of course
    also bumped.)

 -- Steinar H. Gunderson <sesse@debian.org>  Sat,  6 May 2006 01:50:10 +0200

nfs-utils (1:1.0.7-12) unstable; urgency=low

  * Move the home directory again (by request), this time to /var/lib/nfs.

 -- Steinar H. Gunderson <sesse@debian.org>  Wed,  3 May 2006 21:27:18 +0200

nfs-utils (1:1.0.7-11) unstable; urgency=low

  * When creating statd user, create it with a home directory of /nonexistant;
    it doesn't really require a home directory. (Closes: #365514, #365721)
  * Fix the signal number for USR1 (actually, use the name instead) in
    nhfsrun. (Closes: #365657)

 -- Steinar H. Gunderson <sesse@debian.org>  Wed,  3 May 2006 19:51:17 +0200

nfs-utils (1:1.0.7-10) unstable; urgency=low

  * Intermediate 1.0.7 release, waiting for librpcsecgss to be uploaded into
    Debian so we can upload 1.0.8.
  * Clarify what the NEED_* options in /etc/default/nfs-common mean.
    (Closes: #364625)
  * Make /var/lib/nfs/{sm,sm.bak,state,rpc_pipefs} be owned by a new "statd"
    user (created in postinst), causing rpc.statd to be run as that user
    instead of root. (Closes: #240689)
    * Make nfs-common depend on adduser.
  * Clear out obsolete (pre-sarge) debconf and rc.d purging from postinst
    script.
  * Use invoke-rc.d in nfs-common and nfs-kernel-server prerms instead of
    calling the /etc/init.d script directly; fixes two lintian warnings.

 -- Steinar H. Gunderson <sesse@debian.org>  Thu, 27 Apr 2006 00:32:27 +0200

nfs-utils (1:1.0.7-9) unstable; urgency=low

  * When checking for nfsd support in the kernel, check for init_nfsd
    (which is a function) rather than nfsd_version (which is a variable);
    kernels compiled without CONFIG_KALLSYMS_ALL=y have only the former.
    (Closes: #361026)

 -- Steinar H. Gunderson <sesse@debian.org>  Thu,  6 Apr 2006 13:31:48 +0200

nfs-utils (1:1.0.7-8) unstable; urgency=low

  * Don't complain about missing sync/async for a read-only export.
    (Closes: #265409)
  * Implement --state-directory-path for rpc.mountd; most code borrowed
    from rpc.statd. (Closes: #352387)
    * Update mountd.man accordingly.

 -- Steinar H. Gunderson <sesse@debian.org>  Wed,  5 Apr 2006 22:54:09 +0200

nfs-utils (1:1.0.7-7) unstable; urgency=high

  * urgency=high, fixes an RC bug.
  * Let the init script test for kernel support before trying to start
    nfs-kernel-server. (Closes: #360420)
  * Include help on how to activate /etc/exports changes; text from
    Martin Pool. (Closes: #239286)
  * Document sync option in exports man page. (Closes: #297135)
  * Give an example in /etc/exports. (Closes: #345460)
  * Write a mini-HOWTO on how to get NFSv4 up and running. (Closes: #294468)
    * Install it in debian/rules.

 -- Steinar H. Gunderson <sesse@debian.org>  Wed,  5 Apr 2006 18:15:20 +0200

nfs-utils (1:1.0.7-6) unstable; urgency=low

  * Let the man-page fixup script in debian/rules look for the man pages in
    the right place.
  * Modprobe nfs4 along with nfs in the nfs-common init script. Also modprobe
    rpcsec_gss_krb5 before we start gssd.
  * Implement autodetection for NEED_IDMAPD and NEED_GSSD, based on /etc/fstab.
  * Add a note to the top of /etc/defaults/nfs-common that the default is to
    autodetect.
  * Move /var/lib/nfs/rpc_pipefs from nfs-kernel-server.dirs to
    nfs-common.dirs; it's needed by the client as well.
  * Let dh_install install from debian/tmp/ instead of debian/tmp; it fixes
    minor aesthetic issues in the build log.

 -- Steinar H. Gunderson <sesse@debian.org>  Sat,  1 Apr 2006 02:46:53 +0200

nfs-utils (1:1.0.7-5) unstable; urgency=low

  * Non-non-maintainer-upload this time, it seems. :-)
  * Don't let the init script fail if there wasn't any lockd threads to kill;
    this could cause the package to fail configuration.
  * Move to debhelper compatibility level 5.
    * Use dh_install instead of dh_movefiles (actually a combination was used
      earlier). Move stuff from *.files accordingly into *.install.
    * mkdir debian/tmp manually before doing make install, and remove it
      in the clean target.
    * Use straight cp -a instead of dh_install for the files that _don't_
      come from debian/tmp/ (the two /etc files).
    * Fix the "fixups" part in debian/rules to reflect the behaviour of
      dh_install compared to dh_movefiles (ie. don't rm lots of stuff in
      debian/tmp, etc.).
    * Make a debian/nfs-kernel-server.install listing explicitly the files
      we want in that package; with dh_movefiles everything from make install
      was implicitly put there. This has the side effect that the man pages
      for rpc.gssd and idmap.conf are no longer put in nfs-kernel-server, but
      in nfs-common, where they should be.
    * Use dh_installman to install the manpages, to make sure they're in the
      right place (and move the manpage lists from *.files to *.manpages
      accordingly). List the rpc.* variants of the manpages in *.links,
      instead of assuming dh_compress (!) will make them for us. Bonus points
      for then not including the nonsensical rpc.* variants, such as
      rpc.idmapd.conf(5).
    * Don't mv lockd, statd and showmount manually from /usr/sbin to /sbin;
      let the .install file do it for us.
    * Remove *.conffiles; debhelper now sets everything in /etc as conffiles
      automatically.
    * Extend the debian/rules rm hack to the files we removed in this version
      (ick).
    * In debian/control, make nfs-common replace nfs-kernel-server
      (<< 1:1.0.7-5), since the idmapd manpage switched packages.
  * Remove old cruft in debian/rules file:
    * Remove non-used dh_* programs.
    * Remove obsolete source and diff targets.
    * Remove SETGCC hack.
  * Don't set rpath for rpc.gssd and rpc.svcgssd (fixes lintian warnings).

 -- Steinar H. Gunderson <sesse@debian.org>  Tue, 28 Mar 2006 02:57:23 +0200

nfs-utils (1:1.0.7-4) unstable; urgency=low

  * Ack NMU. Thanks Steinar H. Gunderson.
    Closes: #239230, #245449, #246904, #247473, #248300, #252081,
    #287026, #294928, #303497, #310940, #323460, #326663, #332047,
    #337836, #338292, #359024.
  * Added Steinar H. Gunderson and Daniel Baumann as uploaders.
  * Added homepage to package descriptions.
  * Set Standards-Version to 3.6.2.
  * Fixed outdated-autotools-helper-file.

 -- Anibal Monsalve Salazar <anibal@debian.org>  Mon, 27 Mar 2006 13:22:51 +1100

nfs-utils (1:1.0.7-3.1) unstable; urgency=low

  * Non-maintainer upload.
  * Set u+w on all files in debian/, so dch etc. actually works.
  * Add /var/lib/nfs/v4recovery to nfs-kernel-server.dirs. (Closes: #337836).
  * Add /var/lib/nfs/rpc_pipefs to nfs-kernel-server.dirs. (Closes: #310940).
  * Fix problems with exportfs -o when there are multiple entries of the same
    type for the same path that match a given client; patch from Fumihiko
    Kakuma. (Closes: #245449)
  * Start nfs-kernel-server even if /etc/exports is empty, as long as it
    exists; patch from Alexis Huxley. (Closes: #246904) This patch also
    happens to fix and thus Closes: #338292.
  * When stopping daemons, do it even if they do not run as root; based on a
    patch from Andreas Schmidt. (Closes: #247473)
  * SIGKILL kernel lockd thread on stop, to make the kernel release all its
    locks; patch from Jeffrey Layton. (Closes: #252081)
  * Flush the kernel export table on stop; patch from Jeffrey Layton
    (Closes: #248300).
  * Change default root-squashed uid from -2 to 65534; the former changes
    depending of the size of uid_t, and we want it to match the user "nobody"
    (which has uid 65534). (Closes: #323460)
  * Remove dependency on debconf, as it's no longer used. Also, don't run
    dh_installdebconf anymore. (Closes: #332047)
  * Check for /sbin/modprobe before using it, for non-modular kernels;
    patch from Vincent Crvt. (Closes: #294928)
  * Replaced the rather emtpy nhfsstone long description by the one from
    its manpage. (Closes: #303497)
  * Don't ship upstream README anymore, as it's not relevant for our users.
    (Closes: #326663)
  * Add the ability to start nfs-kernel-server niced; patch from Kimmo
    Tervinen. (Closes: #287026)
  * Escape '#' when writing export entries, so they are not mistakenly parsed
    as comments when re-reading them. (Closes: #239230)
  * Also Closes: #359024 automatically by recompiling package.

 -- Steinar H. Gunderson <sesse@debian.org>  Sun, 26 Mar 2006 14:57:50 +0200

nfs-utils (1:1.0.7-3) unstable; urgency=medium

  * New maintainer, closes: #303559.

 -- Anibal Monsalve Salazar <anibal@debian.org>  Fri, 08 Apr 2005 11:25:17 +1000

nfs-utils (1:1.0.7-2) unstable; urgency=low

  * Orphaning package.
  * Upstream CVS sync:
    > Support "no_acl" export option, for the few specially patched
      kernels that understand it.  (Closes: #253824)
    > Fix FTBTS on amd64.  (Closes: #297729)
    > Update config.{guess,sub}.  (Closes: #300552)

 -- Chip Salzenberg <chip@debian.org>  Thu,  7 Apr 2005 09:07:24 -0400

nfs-utils (1:1.0.7-1) unstable; urgency=medium

  * Acknowledge NMU; thanks to joeyh.  (closes: #287053)
  * New upstream version:
    > Add support for NFSv4.
    > Ignore SIGPIPE, fixing a remote DOS.  Note that the previous
      NMU already fixed this bug.  (CAN-2004-1014)
    > At long last, fix "erroneous SM_UNMON" warnings.  (closes: #165744)

 -- Chip Salzenberg <chip@debian.org>  Tue, 11 Jan 2005 23:31:05 -0500

nfs-utils (1:1.0.6-3) unstable; urgency=medium

  * Remove obsolete debconf-related files in debian/rules, because source
    diffs don't implement removals.  (closes: #239331)

 -- Chip Salzenberg <chip@debian.org>  Wed, 24 Mar 2004 18:09:21 -0500

nfs-utils (1:1.0.6-2) unstable; urgency=medium

  * Upstream CVS sync.
  * Urgency "medium" to get debconf fix into testing.
  * Remove debconf warning notes in favor of nfs-kernel-server.NEWS.
    (closes: #228365)
  * Make /etc/exports a conffile.  (closes: #224557)
  * Clean up /var/lib/nfs in postrm.
  * Test kernel version in init script; all kernels from 2.4 forward
    have a lockd thread, and don't need rpc.lockd.  Probe older kernels
    by checking for lockd-related symbols.  When in doubt, go ahead and
    run rpc.lockd; if it's not needed, it exits.  (closes: #205867)
  * Don't bother removing nfs-server's init links; it's long dead.

 -- Chip Salzenberg <chip@debian.org>  Thu, 18 Mar 2004 17:06:00 -0500

nfs-utils (1:1.0.6-1) unstable; urgency=low

  * New upstream version:
    > Workaround glibc bug with large fd rlimits.
  * Japanese debconf translation from Kenshi Muto <kmuto@debian.org>.
    (closes: #209370)

 -- Chip Salzenberg <chip@debian.org>  Fri, 12 Sep 2003 12:47:58 -0400

nfs-utils (1:1.0.5-3) unstable; urgency=high

  * Upstream CVS sync:
    > Fix crash on invalid reverse DNS.  (closes: #209318)

 -- Chip Salzenberg <chip@debian.org>  Tue,  9 Sep 2003 14:02:46 -0400

nfs-utils (1:1.0.5-2) unstable; urgency=low

  * Upstream CVS sync:
    > Improve support for 2.6.0 /proc interface.
  * Use po-debconf.  Patch from Andre Luis Lopes <andrelop@ig.com.br>,
    with improved French from Christian Perrier <bubulle@debian.org>.
    (closes: #187866, #202196)

 -- Chip Salzenberg <chip@debian.org>  Wed, 20 Aug 2003 17:03:44 -0400

nfs-utils (1:1.0.5-1) unstable; urgency=high

  * New upstream version:
    > Don't use freed memory.  (closes: #201311, #201598, #201873)
    > Fix mountd -o arg.  (closes: #197355)
  
 -- Chip Salzenberg <chip@debian.org>  Thu, 24 Jul 2003 15:40:12 -0400

nfs-utils (1:1.0.3-2) unstable; urgency=high

  * Upstream CVS sync:
    > Fix one-byte buffer overflow in logging code.

 -- Chip Salzenberg <chip@debian.org>  Tue, 10 Jun 2003 11:11:56 -0400

nfs-utils (1:1.0.3-1) unstable; urgency=low

  * New upstream version:
    > Support reading and writing export cache in /proc/rpc/*/channel,
      as current syscall interface may not survive into 2.6 on all archs.

 -- Chip Salzenberg <chip@debian.org>  Wed, 26 Mar 2003 11:38:52 -0500

nfs-utils (1:1.0.2-2) unstable; urgency=medium

  * Upstream CVS sync:
    > Fix one-byte buffer overflow with no apparent security implications.
      (It's a readlink on a path that should be writable only to root.)
  * Make nfs-{common,kernel-server} depend on sysvinit 2.80-1 for invoke-rc.d.
  * Make nfs-common depend on debconf (long overdue).
  * Fix package description to name nfs-user-server as an alternative, rather
    than "nfs-server" (which no longer exists).

 -- Chip Salzenberg <chip@debian.org>  Wed, 12 Feb 2003 21:27:24 -0500

nfs-utils (1:1.0.2-1) unstable; urgency=high

  * New upstream version:
    > Allow program stdin to be a non-INET socket.  (closes: #142557)
  * Start nfs-common after nfs-kernel-server so that the server is running
    when statd restarts; without this change, a rebooting server may make
    clients lose mounts.  (This postinst removes bad rc.d links from old
    packages.)  From Philippe Troin <phil@fifi.org>.  (closes: #160800)
  * Make init scripts exit with non-zero status when daemons don't start.
  * Add titles to templates where I forgot them.  (closes: #158489)
  * Add /etc/default/{nfs-common,nfs-kernel-server} so setting random
    parameters doesn't require editing init scripts.  (closes: #131539)
  * Split templates into separate files, and add French templates.
    (closes: #134630)
  * Use invoke-rc.d to avoid premature daemon starts.  (closes: 158574)
  * Change priority of nfs-kernel-server to 'optional'.

 -- Chip Salzenberg <chip@debian.org>  Sun, 15 Sep 2002 22:00:27 -0400

nfs-utils (1:1.0.1-1) unstable; urgency=low

  * New upstream version:
    > BIG CHANGE: Exports default to "sync", that is, synchronous writes.
      This is safer but MUCH SLOWER than the old default of "async".
      All exports should be marked as either "sync" or "async" to avoid a
      warning from exportfs.
  * Patches from CVS through 2002-08-26.
  * Let init script start statd on a specific port.  (closes: #144344)
  * Fix typo in debconf message about tcpwrappers.  (closes: #128709)
  * Fix typo in rpc.nfsd(8).  (closes: #152556)
  * Add Russian templates.  (closes: #136599, #136932)

 -- Chip Salzenberg <chip@debian.org>  Mon, 26 Aug 2002 12:17:57 -0400

nfs-utils (1:1.0-2) unstable; urgency=low

  * Fail an export if its mapping option is unsupported.  (closes: #85678)

 -- Chip Salzenberg <chip@debian.org>  Wed,  2 Jan 2002 15:52:37 -0800

nfs-utils (1:1.0-1) unstable; urgency=medium

  * New upstream version.  (Version number is only change.)
  * Urgency "medium" so woody users see the pretty new version number.
    (Yeah, it's shallow... but, doggone it, this is mature code.)

 -- Chip Salzenberg <chip@debian.org>  Wed, 26 Dec 2001 20:21:15 -0800

nfs-utils (1:0.3.3-6) unstable; urgency=high

  * Upstream fixes:
    > Ignore case when comparing host names.
    > Use all addresses of multi-homed hosts in export processing.
    > When reading /proc/fs/nfs/exports, assume noasync and nowgather;
      older kernels did so, while newer kernels report them explicitly.
    > Remove man page refs to "hosts_allow(5)".  (closes: #122540)
    > In exports.5: Emphasize the need for options to immediately follow
      client names.  Explain that wildcards don't usually work on addresses,
      but may work when reverse DNS fails. (closes: #118040, #116039)

 -- Chip Salzenberg <chip@debian.org>  Wed, 26 Dec 2001 18:54:35 -0800

nfs-utils (1:0.3.3-5) unstable; urgency=high

  * Keep NFS fully operational during upgrade.  (closes: #76544)
  * When calling update-rc.d, send stdout to /dev/null, but not stderr.

 -- Chip Salzenberg <chip@debian.org>  Thu, 13 Dec 2001 18:50:47 -0800

nfs-utils (1:0.3.3-4) unstable; urgency=high

  * High priority due to changes in previous version.
  * Upstream fixes:
    > Close filehandles in nfsd before spawing kernel threads.  This is a
      workaround for a kernel bug.  (closes: #121213)
    > Document that both host names *and* addresses are checked with tcpwrappers.
      This is a doc update, not a change.  (closes: #108493)
    > Don't assume that strings starting with digits are IP addresses;
      host names are allowed to start with digits.  (closes: #68977)
  * German template for nfs-common.  (closes: #120939)

 -- Chip Salzenberg <chip@debian.org>  Mon, 26 Nov 2001 11:50:43 -0800

nfs-utils (1:0.3.3-3) unstable; urgency=low

  * Upstream fixes:
    > Accept obsolete mount option "crossmnt" for parsing old xtab files
      after upgrade.  (closes: #78801)
    > Put filenames into more error messages.
  * Stop debconf before starting nfsd to avoid a hang.  Kernel threads
    like nfsd aren't supposed to inherit open files from the programs that
    start them, but nfsd does.  See debconf tutorial.  (closes: #115817)
  * Rebuild with current glibc.  (closes: #119545)
  * Carefully account for ownership of /var/lib/nfs/*.  (closes: #117258)
  * Warn about statd using tcpwrappers.  (closes: #92666)
  * Only warn about mountd's tcpwrappers name change if the old name
    appears in the tcpwrapper config files.
  * German template for nfs-kernel-server.  (closes: #117196)

 -- Chip Salzenberg <chip@debian.org>  Wed, 21 Nov 2001 18:30:36 -0800

nfs-utils (1:0.3.3-2) unstable; urgency=high

  * The "Test It Before Release, Stupid" release.
  * Repair total failure of rpc.mountd.  (closes: #115095)

 -- Chip Salzenberg <chip@debian.org>  Thu, 11 Oct 2001 13:03:45 -0700

nfs-utils (1:0.3.3-1) unstable; urgency=medium

  * The "Life Goes On" release.
  * New upstream version.  (closes: #113042)
    > Avoid DNS when unexporting... important for shutdown.
    > Recognize double-quote and \octal quoting in pathnames.
    > Print pathnames with \octal quoting as necessary.
  * Depend on a version of glibc that restores rpcinfo to its rightful
    place.  (closes: #102400)
  * Fix pathname in mountd doc.  (closes: #112088)
  * debian/nfs-kernel-server.postinst: Remove rc.d symlinks to old
    nfs-server init script, which doesn't realize when it's been removed.
    (closes: #97099)
  * Warn users about "rpc.mountd" -> "mountd" in /etc/hosts.{allow,deny}.
    This marks my first use of debconf!  W00T!  (closes: #92671)

 -- Chip Salzenberg <chip@debian.org>  Mon,  8 Oct 2001 15:04:08 -0700

nfs-utils (1:0.3.2-2) unstable; urgency=low

  * Rebuild with new libc.  (closes: #97252, #97455, #99829, #100317)
  * Fix typo in nfs-kernel-server init script.  (closes: #100380)
  * Start all daemons in root directory.
  
 -- Chip Salzenberg <chip@debian.org>  Fri, 15 Jun 2001 15:57:18 -0700

nfs-utils (1:0.3.2-1) unstable; urgency=low

  * Upstream changes to statd:
    > Recognize long options.
    > On startup, close std{in,out,err}.
    > Updated man page.
  * Let debhelper handle doc symlinks.  (closes: #74094)
  * Rename upstream changelog, per policy.
  * Get rid of suidregister call.

 -- Chip Salzenberg <chip@debian.org>  Sun,  1 Apr 2001 19:21:26 -0700

nfs-utils (1:0.3.1-1) unstable; urgency=medium

  * New upstream version.
  * Incorporate (but not all) Bug Party changes by David LaBissoniere
    <labiss@usit.net>:
    > Mention upstream source and license in copyright file.  (closes: #79997)
    > Add Build-Depends for debhelper and libwrap0-dev.  (closes: #84131)

 -- Chip Salzenberg <chip@debian.org>  Mon, 26 Feb 2001 16:51:15 -0800

nfs-utils (1:0.3-2) unstable; urgency=low

  * Upstream:
    > Don't modify socket buffer sizes.

 -- Chip Salzenberg <chip@debian.org>  Mon, 12 Feb 2001 20:46:22 -0800

nfs-utils (1:0.3-1) unstable; urgency=low

  * New upstream.

 -- Chip Salzenberg <chip@debian.org>  Sun, 28 Jan 2001 18:13:59 -0800

nfs-utils (1:0.2.1-5) unstable; urgency=low

  * Fix statd callback protection ("--secure-statd") to
     1. work with current kernels as far as possible, and
     2. allow for Trond's recent NFS patches, which change the
        static callback RPC procedure.
  * Store return values of getc and getopt in int variables:
    they can return EOF, which requires an int. (From NMU)
  
 -- Chip Salzenberg <chip@debian.org>  Sat, 20 Jan 2001 20:03:07 -0800

nfs-utils (1:0.2.1-4) unstable; urgency=medium

  * Warn about common errors in /etc/exports.  (closes: #66421)
  * Fix line numbers in messages about /etc/exports.  (closes: #59734)
  * Let nhfsstone replace files from old server packages.  (closes: #59261)

 -- Chip Salzenberg <chip@valinux.com>  Sun,  3 Dec 2000 14:41:13 -0800

nfs-utils (1:0.2.1-3) unstable; urgency=low

  * Add portmap dependency. (closes: #75639)
  * Upstream:
    > mountd: New option "-n/--no-tcp".

 -- Chip Salzenberg <chip@valinux.com>  Sun, 19 Nov 2000 09:22:19 -0800

nfs-utils (1:0.2.1-2) unstable; urgency=high

  * On shutdown, kill user-mode lockd, not kernel-mode lockd thread.
  * Big upstream fix:
     > statd: Repair memory leaks and corruptions.
  * Other upstream patches:
     > exportfs: Support CIDR netmasks (e.g. "1.2.3.4/24").
     > statd: Fix callbacks to local lockd; Be paranoid about IP addresses
       when doing callbacks to local lockd; Add debugging features; Make
       logs more readable.

 -- Chip Salzenberg <chip@valinux.com>  Thu,  2 Nov 2000 18:10:36 -0800

nfs-utils (1:0.2.1-1) unstable; urgency=low

  * New upstream w/minor fixes.

 -- Chip Salzenberg <chip@valinux.com>  Mon,  2 Oct 2000 17:32:00 -0700

nfs-utils (1:0.2-1) unstable; urgency=low

  * New upstream version number.
  * Minor fixes.

 -- Chip Salzenberg <chip@valinux.com>  Tue,  5 Sep 2000 11:30:00 -0700

nfs-utils (1:0.1.9.1-2) unstable; urgency=medium

  * Upstream addition of tcpwrapper support in statd and mountd.
  * Upstream fixes from H.J. Lu and Neil Brown.
  * Run exportfs first during startup (again).

 -- Chip Salzenberg <chip@valinux.com>  Sat, 26 Aug 2000 17:30:00 -0700

nfs-utils (1:0.1.9.1-1) frozen unstable; urgency=high

  * New upstream version, fixes more logging errors.
  * Fix Debian distribution list.

 -- Chip Salzenberg <chip@valinux.com>  Wed,  5 Jul 2000 15:00:00 -0800

nfs-utils (1:0.1.8.2-2) unstable; urgency=high

  * Fix serious logging error in statd.

 -- Chip Salzenberg <chip@valinux.com>  Wed, 28 Jun 2000 23:00:00 -0800

nfs-utils (1:0.1.8.2-1) unstable; urgency=low

  * New upstream version.
  * During startup, start daemons before running exportfs.

 -- Chip Salzenberg <chip@valinux.com>  Wed, 28 Jun 2000 15:00:00 -0800

nfs-utils (1:0.1.8.1-1) unstable; urgency=medium

  * New upstream version.
  * Chdir to / before spawning daemons. (closes: #60837, #64857)
  * Follow policy for init messages. (closes: #59184, #65519)

 -- Chip Salzenberg <chip@valinux.com>  Mon, 12 Jun 2000 22:30:00 -0800

nfs-utils (1:0.1.8-1) unstable; urgency=low

  * New upstream version.

 -- Chip Salzenberg <chip@valinux.com>  Sun,  4 Jun 2000 13:30:00 -0800

nfs-utils (1:0.1.7.1-1) unstable; urgency=medium

  * New upstream version.
  * Use fewer sockets in mountd by sharing RPC transports,
    even when it is run without '-p'.

 -- Chip Salzenberg <chip@valinux.com>  Sat, 29 Apr 2000 20:45:00 -0800

nfs-utils (1:0.1.6-3) frozen unstable; urgency=medium

  * Fix kernel server shutdown order: mountd, nfsd, exportfs.
  * Upstream:  Fix 'mountd -p'.  Use fewer UDP sockets
    by sharing RPC transports.  Display more mount flags.

 -- Chip Salzenberg <chip@valinux.com>  Mon, 13 Mar 2000 14:45:00 -0800

nfs-utils (1:0.1.6-2) frozen unstable; urgency=medium

  * Split off nhfsstone into its own package, since it has
    helper scripts and most people won't use it.
  * Also include nhfsstone's helpers: nhfs{run,nums,graph}.
  * Install man page for nhfsstone. (closes: #55194)
  * Always run lockd on non-module kernels. (closes: #57841)
  * Make init scripts config files. (closes: #55193)
  * Handle "force-reload" in nfs-common's init script. (ditto)
  * Fix line numbers in error messages. (closes: #57717)
  * Write man page for rpc.lockd. (closes: #55192)
  * Fix typo in exports(5) man page. (closes: #46933)
  * Add /usr/doc -> /usr/share doc links. (closes: #54983)
  * Add copyright file. (closes: #55195)
  * Refresh sources from upstream.
  * Refine dependencies.

 -- Chip Salzenberg <chip@valinux.com>  Sat, 26 Feb 2000 02:00:00 -0800

nfs-utils (1:0.1.6-1) unstable; urgency=high

  * New upstream version.
  * Make nfs-kernel-server conflict with and replace knfs.

 -- Chip Salzenberg <chip@valinux.com>  Wed, 12 Jan 2000 19:30:00 -0800

nfs-utils (1:0.1.5-2) unstable; urgency=high

  * Rename packages to "nfs-common" and "nfs-kernel-server".
    (Previous package names were only temporary anyway.)
  * Prepend "1:" to version, to override existing nfs-common.
  * Remove rpc.rquotad -- it's already packaged in "quota".

 -- Chip Salzenberg <chip@valinux.com>  Wed, 29 Dec 1999 17:00:00 -0800

nfs-utils (0.1.5-1) unstable; urgency=medium

  * New upstream version.
  * Allow for some kernels not requiring rpc.lockd.

 -- Chip Salzenberg <chip@valinux.com>  Sun, 19 Dec 1999 11:40:00 -0800

nfs-utils (0.1.4-1) unstable; urgency=low

  * New upstream version.
  * Don't disable NFSv3 by default.

 -- Chip Salzenberg <chip@valinux.com>  Fri, 10 Dec 1999 23:00:00 -0800

nfs-utils (0.1.3-2) unstable; urgency=low

  * Conflict with standard NFS packages.

 -- Chip Salzenberg <chip@valinux.com>  Fri,  3 Dec 1999 22:00:00 -0800

nfs-utils (0.1.3-1) unstable; urgency=low

  * New upstream version.
  * Start following CVS tree at SourceForge.

 -- Chip Salzenberg <chip@valinux.com>  Fri,  3 Dec 1999 20:00:00 -0800

