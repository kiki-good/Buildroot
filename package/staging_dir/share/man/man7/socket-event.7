.TH socket\-event 7 2011-03-08 upstart
.\"
.SH NAME
socket \- event signalling that a socket connection has been made
.\"
.SH SYNOPSIS
.B socket
.BI PROTO\fR= PROTO
.BI PORT\fR= PORT
.BI ADDR\fR= ADDR

.B socket
.BI PROTO\fR= PROTO
.BI SOCKET_PATH\fR= PATH
.\"
.SH DESCRIPTION

The
.B socket
event is generated by the
.BR upstart\-socket\-bridge (8)
daemon when a socket connection is made whose details match the
socket event condition and environment specified in a jobs
.B start on
or
.B stop on
stanza.

When an incoming connection is detected, the file descriptor
representing the socket is passed to the job in question to allow it to
.BR accept (2)
the connection. Additionally, the environment variable
.B UPSTART_EVENTS
will contain the name of the event ("socket") and the environment
variable
.B UPSTART_FDS
will contain the number of the file descriptor corresponding to the
listening socket.
.\"
.SH EXAMPLES
.\"
.SS Internet (IPv4) socket
Start web server when first client connects from localhost:
.RS
.nf

start on socket PROTO=inet PORT=80 ADDR=127.0.0.1
.fi
.RE
.\"
.SS Internet (IPv6) socket
Start job when a client connects from localhost:
.RS
.nf

start on socket PROTO=inet6 PORT=80 ADDR=::1
.fi
.RE
.\"
.SS Local socket
.P
.RS
.nf
start on socket PROTO=unix SOCKET_PATH=/var/run/.s.pgsql.1234
.fi
.RE
.\"
.SS Abstract socket
.P
.RS
.nf
start on socket PROTO=unix SOCKET_PATH=@/at/upstart/example
.fi
.RE
.\"
.SH AUTHOR
Written by Scott James Remnant
.RB < scott@netsplit.com >

Manual page written by James Hunt
.RB < james.hunt@ubuntu.com >
.\"
.SH BUGS
Report bugs at 
.RB < https://launchpad.net/upstart/+bugs >
.\"
.SH COPYRIGHT
Copyright \(co 2011 Canonical Ltd.
.PP
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
.\"
.SH SEE ALSO
.BR init (5)
.BR init (8)
.BR socket (2)
.BR socket (7)
.BR upstart\-socket\-bridge (8)
